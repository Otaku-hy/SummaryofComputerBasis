## 数据的表示与运算(Part2)

### 3. 定点数乘除

1. 原码一位乘法

   a. 符号位单独异或

   b. 每次被乘数加乘数的最低位(0/1)，将结果写入部分积，并将部分积和乘数两个寄存器联合逻辑右移(乘数在地位，部分积最高位补0)，进行下一次乘法

   c. 直到除符号位外乘数全部移出寄存器则乘法结束

   <img src="./images/截屏2023-12-30 20.16.36.png" alt="截屏2023-12-30 20.16.36" style="zoom:25%;" />

2. 补码一位乘法

   a. 计算X，Y，-Y的补码 (补码符号位参与运算)

   b. 在乘数寄存器后增加辅助位初始0，部分积使用双符号位

   c. 根据Yn+1辅助位和Yn最低位的比较值加X或-X，将结果写入部分积，并将部分积和乘数两个寄存器联合算数右移，Yn已入辅助位，进行下一次乘法

   **规则：Yn+1 > Yn  +X

   ​		Yn+1 < Yn  +(-X)

   ​		Yn+1 = Yn  +0 

   d. 当Yn为符号位时最后进行1次运算，并清零符号位

   <img src="./images/截屏2023-12-30 20.17.21.png" alt="截屏2023-12-30 20.17.21" style="zoom:25%;" />

3. 补码两位乘法

   a. 同一位a

   b. 在乘数寄存器后增加辅助位初始0，部分积使用三符号位，乘数数值部分为偶数则乘数寄存器设双符号位，否则单符号位

   c. 根据Yn+1辅助位Yn最低位和Yn-1次低位的比较值加X，-X，2X，-2X，将结果写入部分积，并将部分积和乘数两个寄存器联合算数右移两位，Yn-1已入辅助位，进行下一次乘法

   **规则：Yn+1 + Yn - 2Yn-1 = 0  0

   ​						= 1  X

   ​						= 2 2X

   ​						= -2 -2X

   ​						= -1 -X

   d. 当符号位参与比较时，为最后一次运算，结束后清零符号位

   <img src="./images/截屏2023-12-30 20.35.01.png" alt="截屏2023-12-30 20.35.01" style="zoom:25%;" />

4. 原码加减交替除法

   a. 符号位单独异或

   b. 商寄存器初始为0，部分余数寄存器初始为被除数

   c. 先试减+(-Y)根据部分余数决定操作：

   ​	余数负，商最低位0，并要求下次操作+Y

   ​	余数正，商最低位1，并要求下次操作-Y

   部分余数和商联合左移，商最低位添零，并开始下一次操作

   d. 当商(连通符号位)充满商寄存器后除法结束，此时余数若为负数则需要将余数恢复为正

<img src="./images/截屏2023-12-30 21.07.56.png" alt="截屏2023-12-30 21.07.56" style="zoom:25%;" />

### 4. 浮点数的表示与运算

1. 表示

   一般由阶码和尾数组成，阶码为整数，尾数为定点小数

   **可以理解为阶码的大小将定点小数的小数点进行左右移动，使得形成浮点数

2. 浮点数规格化

   要求尾数M的绝对值$\frac{1}{2}\leq |M|\lt 1 $

​	因此，当尾数用原码表示时：M=x.1xxxxx

​		当尾数用补码表示时：M=0.1xxxxx或M=1.0xxxxx

​	当超出范围时需要左归或右归

3. 规格化浮点数加减运算

   a. 对阶——将阶数小的进行右归转化为大阶数表示（可能精度丢失）

   b. 尾数运算

   c. 规格化——将结果转化为规格化的尾数

   d. 舍入——考虑到尾数的实际表示尾数，进行舍入

   e. 溢出判断——判断是否发生阶码溢出

4. 规格化浮点数乘除运算

​	a. 检测零

​	b. 阶码相加减

​	c. 尾数相乘除

​	d. 规格化

​	e. 舍入

​	f. 溢出判断