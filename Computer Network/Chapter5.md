## network layer:

1. 主要任务：实现网络互联——数据包的端到端传输

2. 解决问题：a. 向传输层提供服务：数据报—无连接or虚电路—有连接

     		 b. 网络层寻址（IP地址）

   ​		   c. 路由选择 

3. 路由算法：aim：cost最小的路

   ​		    classify：静态路径，人工配置；动态路由：有路由算法动态计算

   basic: 最短路径算法；flooding算法(使用hop counter/记录last squence防止无限重复)

   a. 距离向量路由：

   ​	每个节点只从邻居获得状态更新，根据邻居传递的路由表更新自身的路由表

   ​	**无穷计数问题：一条更新消息可能要经过很长时间才能让路由表条目收敛

   ​		solution: 跳数限制-一条消息传播一定次数就丢弃

   b. 链路状态路由（需要知道整个网络结构）

   1) 通过Hello数据包找邻居
   2) 构建链路状态数据包(所有邻居花费 + seq, age标识)
   3) 分发数据包(注意数据包的转发和ack) 
   4) 用最短路径算法计算该router到所有其他的最短路径

   c. 层次路由 （用于大型网络自治系统间路由）

   1. 每个自治系统的网关路由器将其通过自治系统间路由协议获得的可达路径
   2. 网关路由器传递给自治系统内部所有路由器
   3. 所有路由器根据自身到这些网关路由器的代价，在路由表中记录到其他自治系统需要经过从哪个端口转发数据

   d. 广播路由

   	1. 当一个主机需给多个主机发消息时使用泛洪算法发送数据包
   	1. 其他主机收到消息后，根据逆向路径转发思想——数据包发来的线路是否为从A到B传输的最佳线路。
   	1. 如是，则向其他端口转发，如否，丢弃

   e. 多播路由

   ​	solution1：为每个组中的每个路由器生成多播树

   ​	solution2：将一个节点作为核心生成一颗多播树，所有多播数据要经过核心的转发

   ​			（无法最优但节约空间）

   f. 任播路由：发送数据包到组内任何成员都可，可使用DVR或LSR

   

   ​		 